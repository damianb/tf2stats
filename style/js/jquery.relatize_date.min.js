(function(a){a.fn.relatizeDate=function(){return a(this).each(function(){a(this).text(a.relatizeDate(this))})};a.fn.relatizeDateTime=function(){return a(this).each(function(){a(this).text(a.relatizeDateTime(this))})};a.relatizeDate=function(b){return a.relatizeDate.timeAgoInWords(new Date(a(b).text()))};a.relatizeDateTime=function(b){return a.relatizeDate.timeAgoInWords(new Date(a(b).attr("datetime")))};$r=a.relatizeDate;a.extend(a.relatizeDate,{shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],strftime:function(a,b){var c=a.getDay(),d=a.getMonth();var e=a.getHours(),f=a.getMinutes();var g=function(a){var b=a.toString(10);return(new Array(2-b.length+1)).join("0")+b};return b.replace(/\%([aAbBcdHImMpSwyY])/g,function(b){switch(b[1]){case"a":return $r.shortDays[c];break;case"A":return $r.days[c];break;case"b":return $r.shortMonths[d];break;case"B":return $r.months[d];break;case"c":return a.toString();break;case"d":return g(a.getDate());break;case"H":return g(e);break;case"I":return g((e+12)%12);break;case"m":return g(d+1);break;case"M":return g(f);break;case"p":return e>12?"PM":"AM";break;case"S":return g(a.getSeconds());break;case"w":return c;break;case"y":return g(a.getFullYear()%100);break;case"Y":return a.getFullYear().toString();break}})},timeAgoInWords:function(a,b){return $r.distanceOfTimeInWords(a,new Date,b)},distanceOfTimeInWords:function(a,b,c){var d=parseInt((b.getTime()-a.getTime())/1e3);if(d<60){return"less than a minute ago"}else if(d<120){return"about a minute ago"}else if(d<45*60){return parseInt(d/60).toString()+" minutes ago"}else if(d<120*60){return"about an hour ago"}else if(d<24*60*60){return"about "+parseInt(d/3600).toString()+" hours ago"}else if(d<48*60*60){return"1 day ago"}else{var e=parseInt(d/86400).toString();if(e>5){var f="%B %d, %Y";if(c)f+=" %I:%M %p";return $r.strftime(a,f)}else{return e+" days ago"}}}})})(jQuery)
